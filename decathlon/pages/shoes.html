<!DOCTYPE html>
<html>
  <head>
    <title>Decathlon</title>
    <meta charset="UTF-8" />
    <link rel="icon" href="https://www.decathlon.co.uk/render/favicon-96x96.1d72df8f08484c5c2852.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: sans-serif;
        font-size: 15px;
      }
    </style>
    <!-- SunCo widget -->
    <script>
      !(function (o, p, s, e, c) {
        var i,
          a,
          h,
          u = [],
          d = []
        function t() {
          var t = 'You must provide a supported major version.'
          try {
            if (!c) throw new Error(t)
            var e,
              n = 'https://cdn.smooch.io/',
              r = 'smooch'
            if ((e = 'string' == typeof this.response ? JSON.parse(this.response) : this.response).url) {
              var o = p.getElementsByTagName('script')[0],
                s = p.createElement('script')
              s.async = !0
              var i = c.match(/([0-9]+).?([0-9]+)?.?([0-9]+)?/),
                a = i && i[1]
              if (i && i[3]) s.src = n + r + '.' + c + '.min.js'
              else {
                if (!(4 <= a && e['v' + a])) throw new Error(t)
                s.src = e['v' + a]
              }
              o.parentNode.insertBefore(s, o)
            }
          } catch (e) {
            e.message === t && console.error(e)
          }
        }
        ;(o[s] = {
          init: function () {
            i = arguments
            var t = {
              then: function (e) {
                return d.push({ type: 't', next: e }), t
              },
              catch: function (e) {
                return d.push({ type: 'c', next: e }), t
              }
            }
            return t
          },
          on: function () {
            u.push(arguments)
          },
          render: function () {
            a = arguments
          },
          destroy: function () {
            h = arguments
          }
        }),
          (o.__onWebMessengerHostReady__ = function (e) {
            if ((delete o.__onWebMessengerHostReady__, (o[s] = e), i))
              for (var t = e.init.apply(e, i), n = 0; n < d.length; n++) {
                var r = d[n]
                t = 't' === r.type ? t.then(r.next) : t.catch(r.next)
              }
            a && e.render.apply(e, a), h && e.destroy.apply(e, h)
            for (n = 0; n < u.length; n++) e.on.apply(e, u[n])
          })
        var n = new XMLHttpRequest()
        n.addEventListener('load', t),
          n.open('GET', 'https://' + e + '.webloader.smooch.io/', !0),
          (n.responseType = 'json'),
          n.send()
      })(window, document, 'Smooch', '640b0d9e751dc50119794404', '5')
    </script>
    <script>
      Smooch.init({
        integrationId: '640b0d9e751dc50119794404',
        soundNotificationEnabled: false,
        canUserSeeConversationList: true,
        notificationChannelPromptEnabled: false,
        integrationOrder: [],
        businessName: 'Decathlon',
        businessIconUrl: 'https://asset.brandfetch.io/idf5K0LZSL/idCavYYqqL.png',
        customColors: {
          brandColor: '0099ff',
          conversationColor: '0099ff',
          actionColor: '0099ff'
        }
        // Update HTML to allow click events on New Conversation button
      }).then(() => {
        var iframe = document.getElementById('web-messenger-container')
        iframedocument = iframe.contentDocument || iframe.contentWindow.document
        iframedocument.addEventListener(
          'click',
          function (evt) {
            initializeButton(iframedocument)
          },
          false
        )
      })
    </script>
    <script>
      // Create a conversation when the widget is opened the first time
      Smooch.on('widget:opened', () => {
        if (Smooch.getConversations().length == 0) {
          Smooch.createConversation({
            metadata: {
              language: 'en-gb',
              webpage: window.location.href
            }
          }).then((conversation) => {
            CobrowseIO.customData = {
              zendesk_web_user_id: Smooch.getConversations()[0].participants[0].userId
            }
            console.log(conversation)
          })
        }
      })
    </script>
    <script>
      // Create a conversation when user clicks "New Conversation"
      function initializeButton(iframedocument) {
        var conversationFooter = iframedocument.getElementsByClassName('conversation-group-footer')[0]
        if (conversationFooter) {
          conversationFooter.innerHTML = '<button onclick=parent.createConversation()>New Conversation</button>'
        }
      }
      function createConversation() {
        if (Smooch.isOpened()) {
          Smooch.createConversation({
            metadata: {
              language: 'en-gb',
              webpage: window.location.href
            }
          }).then((conversation) => {
            Smooch.loadConversation(conversation.id)
          })
        }
      }
    </script>
    <!-- Cobrowse snippet -->
    <script>
      ;(function (w, t, c, p, s, e) {
        p = new Promise(function (r) {
          w[c] = {
            client: function () {
              if (!s) {
                s = document.createElement(t)
                s.src = 'https://js.cobrowse.io/CobrowseIO.js'
                s.async = 1
                e = document.getElementsByTagName(t)[0]
                e.parentNode.insertBefore(s, e)
                s.onload = function () {
                  r(w[c])
                }
              }
              return p
            }
          }
        })
      })(window, 'script', 'CobrowseIO')

      CobrowseIO.license = 'Lomb1xJcbZzorw'
      CobrowseIO.client().then(function () {
        CobrowseIO.start()
      })
    </script>
  </head>
  <body>
    <div>
      <a href="checkout.html">
        <img src="img/shoes.png" style="display: block; width: 100%" />
      </a>
    </div>
  </body>
</html>
